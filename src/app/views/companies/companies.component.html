<div class="card-body">
    <div class="row mb-3">
        <div class="col-md-4 offset-md-8">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fa fa-search"></i></span>
                </div>
                <!-- <input type="text" class="form-control" [(ngModel)]="filterQuery" placeholder="Search by name"/> -->
            </div>
        </div>
    </div>


    <h1>All Companys</h1>
    <div style="overflow-x: auto">
        <table datatable class="table table-striped table-hover table-responsive-lg display nowrap">
            <thead>
                <tr>
                    <th>name</th>
                    <th>description</th>
                    <th>Email</th>
                    <th>Role</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let company of companys">
                    <td>{{ company.name }}</td>
                    <td>{{ company.description }}</td>
                    <td>{{ company.email }}</td>
                    <td>{{ company.role }}</td>
                    <td>
                        <button class="btn btn-success btn-block" [routerLink]="['/companies/updateCompany', company._id]">Update</button>
                            <!-- [routerLink]="['/companys/update', company._id]"></button> -->
                        <button class="btn btn-danger btn-block" (click)="deletecompany(company._id)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<!-- Start display companys in array -->
<!-- <button class="btn btn-outline-primary mb-2 mr-2" (click)="openLg(content)">Add company</button> -->

<button type="button" class="btn btn-primary" data-toggle="modal" (click)="companyModal.show()">
    Add Company
</button>

<div bsModal #companyModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-primary" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Please Fill in this form To Add a Company</h4>
          <button type="button" class="close" (click)="companyModal.hide()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            
            <form [formGroup]="addCompany">
                <h1>Companies</h1>
                <p class="text-muted">Create your account</p>


                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="icon-user"></i></span>
                    </div>
                    <input type="text" class="form-control" placeholder="Company Name"
                        autocomplete="name" formControlName="name" id="name"
                        [ngClass]="{'is-valid': submited && addCompany.controls.name.valid, 'is-invalid': submited && addCompany.controls.name.invalid}">
                    <div *ngIf="addCompany.controls.name.errors"
                        class="invalid-feedback d-block">
                        <div *ngIf="addCompany.controls.name.errors.required && submited">
                            Company Name is required ..
                        </div>
                    </div>
                </div>

                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="icon-user"></i></span>
                    </div>
                    <input type="text" class="form-control" placeholder="Company Description"
                        autocomplete="description" formControlName="description"
                        id="description"
                        [ngClass]="{'is-valid': submited && addCompany.controls.description.valid, 'is-invalid': submited && addCompany.controls.description.invalid}">
                    <div *ngIf="addCompany.controls.description.errors"
                        class="invalid-feedback d-block">
                        <div
                            *ngIf="addCompany.controls.description.errors.required && submited">
                            Company Description is required ..
                        </div>
                    </div>
                </div>


                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">@</span>
                    </div>
                    <input type="text" class="form-control" placeholder="Email"
                        autocomplete="email" formControlName="email" id="email"
                        [ngClass]="{'is-valid': submited && addCompany.controls.email.valid, 'is-invalid': submited && addCompany.controls.email.invalid}">
                    <div *ngIf="addCompany.controls.email.errors"
                        class="invalid-feedback d-block">
                        <div *ngIf="addCompany.controls.email.errors.required && submited">
                            Company Email is required ..
                        </div>
                    </div>
                </div>


                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="icon-lock"></i></span>
                    </div>
                    <input type="password" class="form-control" placeholder="Password"
                        autocomplete="password" formControlName="password" id="password"
                        [ngClass]="{'is-valid': submited && addCompany.controls.password.valid, 'is-invalid': submited && addCompany.controls.password.invalid}">
                    <div *ngIf="addCompany.controls.password.errors"
                        class="invalid-feedback d-block">
                        <div *ngIf="addCompany.controls.password.errors.required && submited">
                            Password is required ..
                        </div>
                    </div>
                </div>


                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="icon-lock"></i></span>
                    </div>
                    <input type="text" class="form-control" placeholder="role"
                        autocomplete="role" formControlName="role" id="role"
                        [ngClass]="{'is-valid': submited && addCompany.controls.role.valid, 'is-invalid': submited && addCompany.controls.role.invalid}">
                </div>


                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                class="far fa-portrait"></i></span>
                    </div>
                    <input type="file" class="form-control" placeholder="photo"
                        autocomplete="photo" formControlName="photo" id="photo">
                </div>


                <button type="button" class="btn btn-block btn-success"
                    (click)="sendCompany()">Create
                    A Company</button>
            </form>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary btn-block" (click)="companyModal.hide()">Close</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

